// all goes into webflow

<script  src="
https://cdn.jsdelivr.net/npm/@studio-freight/lenis@1/dist/lenis.min.js
"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/lottie-web/5.9.6/lottie.min.js"></script>

<script>
gsap.registerPlugin(ScrollTrigger,SplitText);const lenis=new Lenis({duration:2,easing:e=>Math.min(1,1.001-Math.pow(2,-10*e)),smooth:!0,wheelMultiplier:.7});function raf(e){lenis.raf(e),requestAnimationFrame(raf)}requestAnimationFrame(raf),lenis.on("scroll",()=>ScrollTrigger.update()),document.querySelector("body").style.display="block",gsap.fromTo("body",{opacity:0},{opacity:1,duration:.5});const toggleSectionInfo=document.querySelector(".n_nav__sections"),sections=document.querySelectorAll("section[data-section-number][data-section-title]"),navLinks=document.querySelectorAll(".n_nav-menu__link");function setToggleSectionInfo(e,t){let r=e.getAttribute("data-section-number")||"",o=e.getAttribute("data-section-title")||"",n=document.createElement("div");n.className="n_nav__section";let a=document.createElement("div");a.className="n_nav__section-title";let i=document.createElement("span");i.className="navbar_section-text__bold",0!==t?i.textContent=r.toString().padStart(2,"0")+"\xa0":i.textContent="",a.appendChild(i),0!==t&&a.appendChild(document.createTextNode(o)),n.appendChild(a),toggleSectionInfo.appendChild(n)}navLinks.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();let r=e.getAttribute("href"),o=document.querySelector(r);o&&gsap.to("body",{opacity:0,duration:.1,onComplete(){closeNav(),lenis.scrollTo(o,{offset:0,duration:1.2,lock:!0,onComplete(){gsap.to("body",{opacity:1,duration:.3})}})}})})}),sections.forEach((e,t)=>setToggleSectionInfo(e,t));let sectionWidths=[],sectionHeight=0;function measureSectionWidths(){let e=document.querySelector(".n_nav__ghost");e&&e.remove();let t=Array.from(document.querySelectorAll(".n_nav__section")),r=document.createElement("div");r.className="n_nav__ghost",r.style.position="absolute",r.style.visibility="hidden",r.style.height="auto",r.style.overflow="visible",r.style.whiteSpace="nowrap",r.style.pointerEvents="none",r.style.top="0",r.style.left="0",r.style.zIndex="-9999",document.body.appendChild(r),t.forEach((e,t)=>{let o=e.cloneNode(!0);o.style.display="block",o.style.visibility="visible",r.appendChild(o)});let o=Array.from(r.querySelectorAll(".n_nav__section"));sectionHeight=o[1]?.getBoundingClientRect().height||0,sectionWidths=o.map((e,t)=>{if(0===t)return 0;let r=e.querySelector(".n_nav__section-title");return r?r.getBoundingClientRect().width:e.getBoundingClientRect().width}),o.forEach((e,t)=>{e.innerText.trim()}),document.body.removeChild(r)}measureSectionWidths();const navSectionsWindow=document.querySelector(".n_nav__sections-window"),navSectionsInner=document.querySelector(".n_nav__sections"),sectionElements=Array.from(document.querySelectorAll("section[data-section-number]"));function setWindowHeight(e=0){navSectionsWindow.style.height=sectionHeight+"px"}function goToSection(e){void 0!==sectionWidths[e]&&(gsap.to(navSectionsWindow,{width:sectionWidths[e]+"px",duration:.3,ease:"power4.out"}),gsap.to(navSectionsInner,{y:-e*sectionHeight+"px",duration:.3,ease:"power4.out"}))}setWindowHeight(),window.addEventListener("resize",()=>{measureSectionWidths(),setWindowHeight()}),gsap.utils.toArray(sectionElements).forEach((e,t)=>{ScrollTrigger.create({trigger:e,start:"top-=50 top",end:"bottom top",onEnter:()=>goToSection(t),onEnterBack:()=>goToSection(t),refreshPriority:-1,onLeaveBack(){console.log(`on onLeaveBack index ${t}`),0===t?goToSection(0):goToSection(t-1)},onLeave(){t!==sectionElements.length-1&&goToSection(t+1)}})}),navSectionsWindow.style.width=sectionWidths[0]+"px",gsap.set(navSectionsInner,{yPercent:0});const navToggle=document.querySelector(".n_nav__toggle"),navMenu=document.querySelector(".n_nav__menu"),navMenuPrimary=document.querySelector(".n_nav__menu-primary"),navHeader=document.querySelector(".n_nav__inner"),navBrand=document.querySelector(".n_nav__brand"),mainWrapper=document.querySelector(".main-wrapper");let scrollPosition=0;function onEscapeKey(e){("Escape"===e.key||"Esc"===e.key)&&closeNav()}function openNav(){lenis.stop(),document.querySelector("body").classList.add("nav-open"),navToggle.setAttribute("aria-expanded","true"),document.addEventListener("keydown",onEscapeKey);gsap.timeline().to(navMenu,{y:0,autoAlpha:1,duration:.3,ease:"power4.out"}).to(navBrand,{opacity:1,pointerEvents:"auto"},"<"),gsap.set(navHeader,{backgroundColor:"#e10600"})}function closeNav(){lenis.start(),navToggle.setAttribute("aria-expanded","false");let e=gsap.timeline();gsap.set(navHeader,{backgroundColor:"transparent"}),e.to(navMenu,{y:-50,autoAlpha:0,duration:.1,ease:"power4.in"}).to(navBrand,{opacity:0,pointerEvents:"none"}),document.querySelector("body").classList.remove("nav-open")}function toggleNav(e){e.preventDefault();let t="true"===navToggle.getAttribute("aria-expanded");t?closeNav():openNav()}function setMenuPrimaryMargin(){let e=navHeader.getBoundingClientRect().height;navMenuPrimary.style.marginTop=e+"px"}function splitTextIntoWords(e,t="text-reveal__word-wrap",r="text-reveal__word"){let o=new SplitText(e,{type:"words",linesClass:t});return o.words.forEach(e=>{let t=document.createElement("span");t.classList.add(r),t.innerHTML=e.innerHTML,e.innerHTML="",e.appendChild(t)}),e.querySelectorAll(`.${r}`)}function prepareWords(e){gsap.set(e,{yPercent:100,opacity:0,color:"#E10600"})}function animateWordsIn(e,t){return gsap.timeline().fromTo(e,{yPercent:100,opacity:0,color:"#E10600"},{yPercent:0,opacity:1,duration:1,ease:"power4.out",stagger:.15}).to(e,{color:t,duration:1,stagger:.15},0)}function animateWordsOut(e,t=1.2){let r=gsap.timeline();return r.to({},{duration:1.2}),r.to(e,{yPercent:100,opacity:0,duration:.8,ease:"power3.inOut",stagger:.1}),r}function fastSVGAni(e){let t=e.querySelectorAll("path");gsap.set(t,{fill:"#e10600"}),gsap.set(e,{opacity:0,scale:.8});let r=gsap.timeline();return r.to(e,{opacity:1,scale:1,duration:1,ease:"power4.out"},"+=0.5"),r.to(t,{fill:"black",duration:1,ease:"power2.inOut"},"<"),r.to({},{duration:1}),r.to(t,{fill:"#e10600",duration:.5,ease:"power2.in"}),r.to(e,{opacity:0,scale:.8,duration:.5,ease:"power2.in"},"<"),r}function createWordTimeline(e,t,r,o,n){let a=r.classList.contains("n_logo-reveal__block"),i=null;if("fast-svg"===r.getAttribute("data-animate-special")){let l=r.closest(".n_text-reveal-section");i=l?l.querySelector(".fast-svg"):null}let s=animateWordsIn(e,t);if(!n)return s;if(i&&s.add(fastSVGAni(i)),a){let c=[...r.querySelectorAll(".n_logo-row__logos")],d=gsap.timeline();c.forEach((e,t)=>{let r=e.parentElement.offsetWidth,o=e.offsetWidth,n=t%2==0?1:-1;gsap.set(e,{left:1===n?"100%":`-${o}px`,opacity:0}),d.to(e,{left:1===n?`-${Math.max(o-r,0)}px`:"0%",opacity:1,duration:3,ease:"expo.out"},0)}),s.add(d,"+=0.5"),s.to({},{duration:1.2}),o||s.to(r.querySelector(".n_logo-reveal__inner"),{opacity:0,scale:.95,duration:1,ease:"power3.inOut"},"+=1")}else s.add(animateWordsOut(e));return s}function resetAndPlay(e){if(!e)return;let t=()=>{try{e.pause()}catch{}try{e.currentTime=0}catch{}let t=e.play?.();t&&"function"==typeof t.catch&&t.catch(()=>{})};if(e.readyState>=2)t();else{let r=()=>{e.removeEventListener("loadedmetadata",r),t()};e.addEventListener("loadedmetadata",r),e.load?.()}}function initVideoTextScrub(e){let t=gsap.utils.toArray(e.querySelectorAll(".ripple-gradient__bg-wrapper .ripple-gradient")),r=t.length;gsap.set(t,{xPercent:e=>0===e?0:100});let o=t[0]?.querySelector("video"),n=t[1]?.querySelector("video");gsap.set([o,n],{xPercent:0});let a=e.querySelector("video"),i=gsap.utils.toArray(e.querySelectorAll(".n_text-reveal__block")),l=i.length;a&&(a.preload="metadata",a.playsInline=!0,a.muted=!0);let s=gsap.timeline({paused:!0,defaults:{ease:"none"},scrollTrigger:{trigger:e,start:"top top",end:()=>`+=${1400*i.length}`,pin:!0,scrub:1,toggleActions:"play reverse play reverse"}}),c=gsap.timeline();i.slice(0,2).forEach((e,t)=>{let r=e.querySelectorAll(".n_text-reveal__heading");r.forEach((o,n)=>{let a=splitTextIntoWords(o);prepareWords(a);let i=n===r.length-1;c.add(createWordTimeline(a,"#ffffff",e,1===t,i))})});let d=gsap.timeline();i.slice(2).forEach((e,a)=>{let i=a+2,s=e.querySelectorAll(".n_text-reveal__heading");2===i&&r>=2&&(d.addLabel("rippleSwap"),d.to(t[0],{xPercent:-100,duration:1,ease:"power4.inOut"},"rippleSwap"),d.fromTo(t[1],{xPercent:100},{xPercent:0,duration:1,ease:"power4.inOut"},"rippleSwap"),o&&d.to(o,{xPercent:50,duration:1,ease:"power4.inOut"},"rippleSwap"),n&&d.fromTo(n,{xPercent:-50},{xPercent:0,duration:1,ease:"power4.inOut"},"rippleSwap")),s.forEach((t,r)=>{let o=splitTextIntoWords(t);prepareWords(o);let n=i===l-1,a=r===s.length-1,c=createWordTimeline(o,"#ffffff",e,n,a&&!n);d.add(c)})}),s.add(c),s.add(d)}function revealText(e){let t=e.querySelectorAll(".n_text-reveal__heading"),r="page-header"===e.getAttribute("element"),o="ripple-gradient"===e.getAttribute("data-element");if(o){initVideoTextScrub(e);return}let n=e.dataset.endColor||"#ffffff",a=gsap.utils.toArray(e.querySelectorAll(".n_text-reveal__block, .n_logo-reveal__block")),i=gsap.timeline({scrollTrigger:{trigger:e,start:"top top",end:()=>`+=${1400*a.length}`,pin:!0,scrub:1,toggleActions:"play reverse play reverse"}}),l;t.forEach(e=>{l=splitTextIntoWords(e),i.add(prepareWords(l))});let s,c,d;if(r){s=e.querySelector(".n_bg-video--fans"),c=e.querySelector(".n_bg-video--logo"),d=e.querySelector(".n-bg-video--flag"),gsap.set([c],{opacity:0,y:0});let u=gsap.timeline();s&&(u.to(s,{opacity:0,duration:.8,ease:"power2.out",onComplete(){}}),u.to(s,{zIndex:"-10",pointerEvents:"none"}),i.add(u,0))}if(a.forEach((t,r)=>{let o=gsap.timeline();o.call(()=>t.classList.add("active")).set(t,{zIndex:2});let l=t.querySelectorAll(".n_text-reveal__heading");if("anton"===t.dataset.animateSpecial){let s=animateAnton(t);i.add(s);return}if("instrument"===t.dataset.animateSpecial){let c=animateInstrument(t);i.add(c);return}if("inter"===t.dataset.animateSpecial){let d=animateInter(t);i.add(d);return}if("bk-switch--white"===t.dataset.animateSpecial){let u=animateBk(t);i.add(u);return}if("like-this"===t.dataset.animateSpecial){let p=animateLikeThis(t,e);i.add(p);return}if("logomark"===t.dataset.animateSpecial){let $=animateLogoMark(t,e);i.add($);return}let g=t.classList.contains("n_logo-reveal__block");if(l.length>1&&!g){let y=Array.from(l).flatMap(e=>splitTextIntoWords(e));o.add(prepareWords(y)),o.add(animateWordsIn(y,n)),o.add(animateWordsOut(y)),o.call(()=>t.classList.remove("active")).set(t,{zIndex:0}),i.add(o);return}l.forEach((e,i)=>{let s=splitTextIntoWords(e),c=r===a.length-1,d=i===l.length-1,u=createWordTimeline(s,n,t,c,d);o.add(u)}),o.call(()=>t.classList.remove("active")),o.set(t,{zIndex:0}),i.to(t,{border:"unset"}),i.add(o)}),i.duration(),r&&c){let p=a[a.length-1],$=p.querySelectorAll("text-reveal__Word");i.to($,{yPercent:100,opacity:0,duration:.8,ease:"power3.inOut",stagger:.1}),i.to(c,{opacity:1,duration:2,ease:"power2.out"})}}function animateAnton(e){let t=gsap.timeline(),r=e.querySelectorAll(".n_text-reveal__heading"),o=Array.from(r),n=e.querySelector(".n_text-reveal__special.anton--lower"),a=e.querySelector(".n_text-reveal__special.anton--upper"),i=e.querySelector(".n_text-reveal__headings");function l(){let e=Math.ceil(Math.max(...o.map(e=>e.getBoundingClientRect().height)));o.forEach(t=>t.style.height=`${e}px`),i.style.height=`${e}px`}l(),window.addEventListener("resize",l);let s=lottie.loadAnimation({container:n,renderer:"svg",loop:!0,autoplay:!1,path:"https://cdn.prod.website-files.com/67b4c8583d604cb6c2fc9a62/68b1ed95b77827f61fecf8cd_Fan_Impact(Lowercase).json"}),c=lottie.loadAnimation({container:a,renderer:"svg",loop:!0,autoplay:!1,path:"https://cdn.prod.website-files.com/67b4c8583d604cb6c2fc9a62/68b1ed953d81bfc59a631db0_Fan_Impact(UpperCase).json"}),d=splitTextIntoWords(r[0]),u=splitTextIntoWords(r[1]);return gsap.set([n,a],{yPercent:100,opacity:0}),t.to(n,{yPercent:0,opacity:1}),t.add(()=>{s.play()}),t.add(animateWordsIn(d,"#ffffff")),t.add(animateWordsOut(d)),t.to(n,{yPercent:100,opacity:0,duration:.8,ease:"power3.inOut"}),t.to(a,{yPercent:0,opacity:1}),t.add(()=>{c.play()},"<"),t.add(animateWordsIn(u,"#ffffff")),t.add(animateWordsOut(u)),t.call(()=>{e.classList.remove("active"),e.style.zIndex="0"}),t.to(a,{yPercent:100,opacity:0,duration:.8,ease:"power3.inOut"}),t}function animateInstrument(e){let t=e.querySelector(".n_text-reveal__heading"),r=e.querySelector(".n_text-reveal__special"),o=e.querySelector("#instrument-lottie");o.getAttribute("data-src");let n=splitTextIntoWords(t),a=gsap.timeline();return a.add(prepareWords(n)),gsap.set(r,{yPercent:100,opacity:0}),a.to(r,{yPercent:0,opacity:1}),a.add(animateWordsIn(n,"#ffffff")),a.add(animateWordsOut(n)),a.to(r,{yPercent:100,opacity:0,duration:.8,ease:"power3.inOut"}),a.call(()=>{e.classList.remove("active"),e.style.zIndex="0"}),a}function animateInter(e){let t=e.querySelector(".n_text-reveal__heading"),r=e.querySelector(".n_text-reveal__special"),o=splitTextIntoWords(t);prepareWords(o);let n=gsap.timeline();return gsap.set(r,{yPercent:100,opacity:0}),n.to(r,{yPercent:0,opacity:1}),n.add(animateWordsIn(o,"#ffffff")),n.add(animateWordsOut(o)),n.to(r,{yPercent:100,opacity:0,duration:.8,ease:"power3.inOut"}),n.call(()=>{e.classList.remove("active"),e.style.zIndex="0"}),n}function animateBk(e){let t=e.querySelector(".n_text-reveal__heading"),r=splitTextIntoWords(t),o=gsap.timeline();return o.add(prepareWords(r)),o.to(e.closest(".n_text-reveal-section"),{background:"white",duration:1},0),o.add(animateWordsIn(r,"#000000")),o.add(animateWordsOut(r)),o.call(()=>{e.classList.remove("active"),e.style.zIndex="0"}),o}function animateLikeThis(e,t){let r=e.querySelector(".n_text-reveal__heading"),o=splitTextIntoWords(r),n=t.querySelector(".special__split"),a=t.querySelector(".special__typography-fans");gsap.set(n,{opacity:0,zIndex:-4}),gsap.set(a,{zIndex:-4,clipPath:"inset(0% 100% 0% 0%)"}),gsap.set(n.querySelector(".special__split-row--top"),{xPercent:-50}),gsap.set(n.querySelector(".special__split-row--bottom"),{xPercent:50});let i=gsap.timeline();return i.add(prepareWords(o)),i.to(n,{opacity:1,zIndex:2}),i.to(n.querySelector(".special__split-row--bottom"),{xPercent:0,duration:2}),i.to(n.querySelector(".special__split-row--top"),{xPercent:0,duration:2},"<"),i.to(n,{duration:1}),i.to(n.querySelector(".special__split-row--bottom"),{xPercent:-100,duration:1}),i.to(n.querySelector(".special__split-row--top"),{xPercent:100,duration:1},"<"),i.set(n,{opacity:0,zIndex:-4}),i.add(animateWordsIn(o,"#000000")),i.add(animateWordsOut(o)),i.to(a,{clipPath:"inset(0% 0% 0% 0%)",zIndex:3,duration:1}),i.call(()=>{e.classList.remove("active"),e.style.zIndex="0"}),i}function animateLogoMark(e,t){let r=e.querySelector(".n_text-reveal__heading"),o=t.querySelector(".logomark"),n=splitTextIntoWords(r);gsap.set(o,{zIndex:-4,clipPath:"inset(0% 100% 0% 0%)"});let a=gsap.timeline();return a.add(prepareWords(n)),a.to(o,{clipPath:"inset(0% 0% 0% 0%)",zIndex:3,duration:1}),a.to(o,{duration:1}),a.add(animateWordsIn(n,"#000000")),a.add(animateWordsOut(n)),a.to(o,{y:150,zIndex:-5,opacity:0,duration:1}),a.call(()=>{e.classList.remove("active"),e.style.zIndex="0"}),a}function initTextRevealSections(){let e=document.querySelectorAll(".n_text-reveal-section");e.forEach(e=>{e._revealed||(e._revealed=!0,revealText(e))})}function dotAnimate(){gsap.set(".dot-wrapper",{clipPath:"circle(0% at 50% 100%)"});gsap.timeline({scrollTrigger:{trigger:".dot-reveal-section .text-color-black",start:"top 40%",end:"+=300",toggleActions:"play none none reverse",scrub:1}}).to(".dot-wrapper",{clipPath:"circle(120% at 50% 100%)",duration:1,ease:"power2.out"})}function setMinHeight(e,t){let r=Array.from(t).map(e=>e.offsetHeight);e.style.minHeight=`${Math.max(...r)}px`}function initFanSansLottie(){let e=document.querySelector(".section-fans"),t=e.querySelector(".section-fans__side--lottie"),r=e.querySelector(".section-fans__text-wrapper"),o=e.querySelectorAll(".section-fans__text"),n=0,a=-1,i=!1,l=e.querySelectorAll(".section-fans__background-block"),s=e.querySelector(".section-fans__text").dataset.frame;setMinHeight(r,o),window.addEventListener("resize",()=>{setMinHeight(r,o)}),gsap.set(l,{opacity:0}),o.forEach((e,t)=>{gsap.set(e,{y:100,opacity:0,immediateRender:!1})});let c=lottie.loadAnimation({container:t,renderer:"svg",loop:!1,autoplay:!1,path:"https://cdn.prod.website-files.com/67b4c8583d604cb6c2fc9a62/685456f50615bd9f4e88f274_FanSans_Animation3_cleaned.json"});c.addEventListener("DOMLoaded",()=>{let t=c.totalFrames;gsap.to(c,{frame:t-1,ease:"none",scrollTrigger:{trigger:e,start:"top top",end:"+=2000",pin:!0,scrub:!0},onUpdate(){c.goToAndStop(c.frame,!0)}})}),c.addEventListener("data_ready",()=>{c.setSubframe(!1)});let d=Array.from(o).map((e,t)=>({frame:parseInt(e.dataset.frame,10),el:e,index:t})),u=null;c.addEventListener("enterFrame",e=>{(n=e.currentTime)<parseInt(s)&&gsap.to(l,{opacity:0,y:20,duration:.15,ease:"power2.inOut"});let t=d.filter(e=>n>=e.frame).sort((e,t)=>t.frame-e.frame)[0];t&&t.index!==a&&(a=t.index,u&&u.kill(),o.forEach(e=>{gsap.set(e,{opacity:0})}),u=gsap.to(t.el,{opacity:1,y:0,duration:.5,ease:"power2.out"}),!i&&n>=parseInt(s,10)&&(i=!0,gsap.fromTo(l,{width:"0%",transformOrigin:"center center"},{opacity:1,width:"100%",duration:1,ease:"power4.out"})))})}function scrollAccordion(e){let t=Array.from(e.querySelectorAll(".n_accordion-title")),r=Array.from(e.querySelectorAll(".panel__definition")),o=e.querySelector(".panels-mask"),n=e.querySelector(".panels-mask__inner"),a=0;function i(){requestAnimationFrame(()=>{let e=Math.ceil(Math.max(...r.map(e=>e.getBoundingClientRect().height)));r.forEach(t=>t.style.height=e+"px"),n.style.height=e+"px"})}function l(e){t.forEach((t,r)=>{t.classList.toggle("active",r===e),t.setAttribute("aria-selected",r===e?"true":"false"),t.setAttribute("tabindex",r===e?"0":"-1")}),r.forEach((t,r)=>{t.setAttribute("aria-hidden",r===e?"false":"true")});let o=t[e];gsap.fromTo(o,{autoAlpha:1,x:50},{autoAlpha:1,x:0,duration:.8,ease:"power4.out"})}function s(e){let t=Math.max(...r.map(e=>e.scrollHeight));gsap.to(r,{y:r=>-(r-e)*t,autoAlpha:t=>t===e?1:0,duration:.8,ease:"power4.out"})}ScrollTrigger.create({trigger:e,start:"top 80%",end:"top 70%",onEnter(){gsap.to(o,{autoAlpha:1,duration:.8,ease:"power2.out"})},toggleActions:"play none none none"}),i(),window.addEventListener("resize",()=>{i(),s(a)}),e.id||(e.id="accordion-"+Math.random().toString(36).slice(2,10)),ScrollTrigger.create({id:e.id,trigger:e,pin:!0,start:"top top",scrub:1,end:()=>`+=${(t.length-1)*500}`,onUpdate(e){let r=Math.floor(e.progress*t.length);(r=Math.min(r,t.length-1))!==a&&(l(a=r),s(a))}}),t.forEach((e,r)=>{e.addEventListener("click",t=>{t.preventDefault(),l(r),s(r),e.focus()}),e.addEventListener("keydown",e=>{if("ArrowRight"===e.key||"ArrowDown"===e.key){e.preventDefault();let o=(r+1)%t.length;t[o].focus(),l(o),s(o)}if("ArrowLeft"===e.key||"ArrowUp"===e.key){e.preventDefault();let n=(r-1+t.length)%t.length;t[n].focus(),l(n),s(n)}"Home"===e.key&&(e.preventDefault(),t[0].focus(),l(0),s(0)),"End"===e.key&&(e.preventDefault(),t[t.length-1].focus(),l(t.length-1),s(t.length-1)),("Enter"===e.key||" "===e.key)&&(e.preventDefault(),l(r),s(r))})}),l(0),s(0)}function initColorPanels(){let e=gsap.utils.toArray(".section--colors .color-panel"),t=gsap.timeline({scrollTrigger:{trigger:".section--colors .colors",pin:".section--colors .colors-wrapper",pinSpacing:!0,scrub:1,onUpdate(t){var r;let o;r=t.progress,o=Math.round(r*e.length-.5),o>=e.length-1&&(o=e.length-1),e.forEach((e,t)=>{t===o?e.classList.add("active"):e.classList.remove("active")})},end:"+="+1e3*e.length}});e.forEach((r,o)=>{let n=o===e.length-1,a=!n&&e[o+1],i=r.querySelector(".colors-content");a&&a.querySelector(".colors-content"),n?t.to(r,{width:"100%",duration:.5,ease:"expo.inOut"}):(t.to(i,{clipPath:"inset(0 100% 0 0)",duration:.2,ease:"expo.inOut"}),t.to(r,{width:"5%",ease:"expo.out"}),t.to(a,{width:"100%",ease:"expo.out",onStart(){a.classList.add("active")}},"<"))})}function stackedSlider(e){let t=gsap.utils.toArray(e.querySelectorAll(".n_stacked-slide")),r=t.length,o=t.map(e=>e.querySelector("img")),n=gsap.timeline({scrollTrigger:{trigger:e,pin:!0,scrub:1,start:"top top",end:`+=${(t.length-1)*1500}`,snap:1/(r-1)}});t.forEach((e,r)=>{if(0===r)return;let a=t[r-1],i=o[r-1],l=o[r];n.to(a,{xPercent:-100,duration:1,ease:"power4.inOut"}),n.to(i,{xPercent:100,duration:1,ease:"power4.inOut"},"<"),n.fromTo(e,{xPercent:100},{xPercent:0,duration:1,ease:"power4.inOut"},"<"),n.fromTo(l,{xPercent:-100},{xPercent:0,duration:1,ease:"power4.inOut"},"<")}),e.setAttribute("tabindex","0"),e.addEventListener("keydown",e=>{let o=n.scrollTrigger,a=o.start,i=o.end,l=window.scrollY,s=Math.round(Math.max(0,Math.min(1,(l-a)/(i-a)))/(1/(r-1)));if("ArrowRight"===e.key||"ArrowDown"===e.key)s=Math.min(s+1,r-1);else{if("ArrowLeft"!==e.key&&"ArrowUp"!==e.key)return;s=Math.max(s-1,0)}e.preventDefault();let c=a+s*(i-a)/(r-1);o.scroll(c);let d=t[s].querySelector(".slide__title").textContent;document.getElementById("slider-status").textContent=`Slide ${s+1} of ${r}: ${d}`})}function initStackedSliders(){let e=document.querySelectorAll(".n_stacked-slider");e.forEach(e=>{e._revealed||(e._revealed=!0,stackedSlider(e))})}function setupBigSlider(e){let t=gsap.utils.toArray(e.querySelectorAll(".n_big-slide")),r=t.length,o=t.map(e=>e.querySelector(".n_big-slide_img")),n=gsap.timeline({scrollTrigger:{trigger:e,pin:!0,scrub:1,start:"top top",end:`+=${(r-1)*window.innerHeight}`,snap:1/(r-1)}});t.forEach((e,r)=>{if(0===r)return;let a=t[r-1],i=o[r-1],l=o[r];n.to(a,{xPercent:-100,duration:1,ease:"power4.inOut"}),n.to(i,{xPercent:100,duration:1,ease:"power4.inOut"},"<"),n.fromTo(e,{xPercent:100},{xPercent:0,duration:1,ease:"power4.inOut"},"<"),n.fromTo(l,{xPercent:-100},{xPercent:0,duration:1,ease:"power4.inOut"},"<")})}function initBigSliderAnimations(){gsap.utils.toArray(".n_big-slider_wrapper").forEach(setupBigSlider)}function initStoryLottie(){let e=document.querySelector(".story__lottie");if(!e)return;let t=lottie.loadAnimation({container:e,renderer:"svg",loop:!1,autoplay:!1,path:"https://cdn.prod.website-files.com/67b4c8583d604cb6c2fc9a62/6843520aa1e4f9f54b166004_2025_06_06_EASCI_Fanatics_ColorCascade_01.json"});t.addEventListener("DOMLoaded",()=>{let r=t.totalFrames;gsap.set(e,{autoAlpha:0}),gsap.timeline({scrollTrigger:{trigger:e,start:"top 80%",end:"+=500",scrub:!0}}).to(e,{autoAlpha:1,duration:.2},0).to({frame:0},{frame:r-1,ease:"none",duration:1,onUpdate(){let e=Math.round(this.targets()[0].frame);t.goToAndStop(e,!0)}},0)})}navToggle.addEventListener("click",toggleNav),setMenuPrimaryMargin(),gsap.utils.toArray(".section-banner, .n_section-header").forEach(e=>{ScrollTrigger.create({trigger:e,start:"top top",end:"+=100%",pin:!0,pinSpacing:!0})}),dotAnimate(),document.querySelectorAll(".n_scroll-accordion").forEach(scrollAccordion),initStoryLottie();let counterInterval;function startCount(){let e=document.querySelector(".section-banner__counter .counter-text");if(!e)return;let t=999899;clearInterval(counterInterval),e.textContent=t.toLocaleString(),counterInterval=setInterval(()=>{if(t>=999999999){clearInterval(counterInterval);return}t+=1,e.textContent=t.toLocaleString()},30)}let bannerEl=document.querySelector(".section-banner__counter").parentElement;function initScrollingSlider(){let e=document.querySelector(".n_scrolling-slider"),t=e.querySelector(".scrolling-slider__track"),r=gsap.utils.toArray(t.querySelectorAll(".scrolling-slider__slide"));e.querySelector(".scrolling-slider__intro");let o=t.scrollWidth,n=e.clientWidth,a=o-n+200;gsap.set(r,{opacity:.5});let i=gsap.timeline({scrollTrigger:{trigger:e,start:"top top",end:`+=${3*a}`,pin:!0,scrub:3,invalidateOnRefresh:!0}});i.to(r,{opacity:1,duration:1.5,stagger:.3,ease:"power2.out"},"<"),i.to(t,{x:-a,duration:1.8*r.length,ease:"power1.inOut"},"<"),i.to(e,{opacity:1,duration:.8})}ScrollTrigger.create({trigger:".section-banner__counter",start:"top 80%",endTrigger:"#wink-section",end:"bottom top",onEnter:startCount,onEnterBack:startCount,onLeave:()=>clearInterval(counterInterval),onLeaveBack:()=>clearInterval(counterInterval),invalidateOnRefresh:!0}),gsap.utils.toArray(".section-fade-up").forEach(e=>{let t=e.closest(".section-banner"),r=!!t,o=r?"top 10%":"top top",n=r?"play reverse play reverse":"play none play complete";gsap.fromTo(e,{opacity:0,y:50},{opacity:1,y:0,duration:.5,ease:"power2.out",scrollTrigger:{trigger:r?t:e,start:o,toggleActions:n}})});const sectionHeaders=document.querySelectorAll(".n_section-header");sectionHeaders.forEach((e,t)=>{let r=e.querySelector(".n_section-header__title"),o=e.querySelector(".n_section-header__number");gsap.set(r,{color:"#E10600"}),gsap.set([r,o],{opacity:0,yPercent:30});let n=gsap.timeline({scrollTrigger:{trigger:e,start:"top 40%",end:"bottom center",toggleActions:"play none none reset"}});n.to([r,o],{opacity:1,yPercent:0,duration:.75,ease:"power4.out",stagger:.12}),n.to(r,{color:"#FFFFFF"},"<"),gsap.timeline({scrollTrigger:{trigger:r,start:"top top",end:"bottom top",toggleActions:"play none none reset"}})}),initTextRevealSections(),initFanSansLottie(),initColorPanels(),initStackedSliders(),initBigSliderAnimations(),initScrollingSlider(),setTimeout(()=>{ScrollTrigger.sort(),ScrollTrigger.refresh()},600);
</script>